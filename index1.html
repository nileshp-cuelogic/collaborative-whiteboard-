<!DOCTYPE html>
<html>
<style>
    body {
        background-color: ivory;
    }

    canvas {
        border: 1px solid red;
        cursor: crosshair;
    }
</style>

<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <button id="red" onclick="SetStrokeStyle('red')">Red</button>
    <button id="green" onclick="SetStrokeStyle('green')">Green</button>
    <button id="blue" onclick="SetStrokeStyle('blue')">Blue</button>
    <br/>
    <canvas id="canvas" width=500 height=500></canvas>
    </br>
    <button id="pen">Pen</button>
    <button id="eraser">Eraser</button>
    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var lastX;
        var lastY;
        var strokeColor = "red";
        var strokeWidth = 5;
        var mouseX;
        var mouseY;
        var canvasOffset = $("#canvas").offset();
        var offsetX = canvasOffset.left;
        var offsetY = canvasOffset.top;
        var isMouseDown = false;


        function SetStrokeStyle(color) {
            this.strokeColor = color;
        }

        function handleMouseDown(e) {
            mouseX = parseInt(e.clientX - offsetX);
            mouseY = parseInt(e.clientY - offsetY);

            // Put your mousedown stuff here
            lastX = mouseX;
            lastY = mouseY;
            isMouseDown = true;
        }

        function handleMouseUp(e) {
            mouseX = parseInt(e.clientX - offsetX);
            mouseY = parseInt(e.clientY - offsetY);

            // Put your mouseup stuff here
            isMouseDown = false;
        }

        function handleMouseOut(e) {
            mouseX = parseInt(e.clientX - offsetX);
            mouseY = parseInt(e.clientY - offsetY);

            // Put your mouseOut stuff here
            isMouseDown = false;
        }

        function handleMouseMove(e) {
            mouseX = parseInt(e.clientX - offsetX);
            mouseY = parseInt(e.clientY - offsetY);

            // Put your mousemove stuff here
            if (isMouseDown) {
                ctx.beginPath();
                if (mode == "pen") {
                    ctx.globalCompositeOperation = "source-over";
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(mouseX, mouseY);
                    ctx.strokeStyle = this.strokeColor;
                    ctx.lineJoin = "round";
                    ctx.lineWidth = 5;
                    ctx.closePath();
                    ctx.stroke();
                } else {
                    ctx.globalCompositeOperation = "destination-out";
                    ctx.arc(lastX, lastY, 8, 0, Math.PI * 2, false);
                    ctx.fill();
                }
                lastX = mouseX;
                lastY = mouseY;
            }
        }

        $("#canvas").mousedown(function (e) { handleMouseDown(e); });
        $("#canvas").mousemove(function (e) { handleMouseMove(e); });
        $("#canvas").mouseup(function (e) { handleMouseUp(e); });
        $("#canvas").mouseout(function (e) { handleMouseOut(e); });

        var mode = "pen";
        $("#pen").click(function () { mode = "pen"; });
        $("#eraser").click(function () { mode = "eraser"; });
    </script>

</body>

</html>